<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Diabetes Prediction â€¢ ØªÙˆÙ‚Ø¹ Ù…Ø±Ø¶ Ø§Ù„Ø³ÙƒØ±ÙŠ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@500;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#0b1022; --bg2:#101a38;
      --card:rgba(255,255,255,.06);
      --glass:rgba(255,255,255,.08);
      --text:#e5e7eb; --muted:#9aa5b1;
      --accent:#22d3ee; --accent2:#a78bfa;
      --ok:#10b981; --bad:#ef4444; --border:rgba(255,255,255,.18);
      --chip:#1f2937; --input:#0f1a36;
      --shadow:0 18px 40px rgba(0,0,0,.28);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:linear-gradient(135deg,var(--bg1),var(--bg2));color:var(--text);
      font-family:Inter,"Cairo",system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans",sans-serif}
    .wrap{max-width:1100px;margin:34px auto;padding:0 16px}
    .header{display:flex;align-items:center;justify-content:space-between;margin-bottom:22px}
    .brand{display:flex;gap:14px;align-items:center}
    .logo{width:52px;height:52px;border-radius:16px;display:grid;place-items:center;
      background:linear-gradient(135deg,var(--accent),var(--accent2)); color:#021827; font-weight:900; box-shadow:var(--shadow)}
    h1{margin:0;font-size:clamp(22px,3.2vw,32px);letter-spacing:.2px}
    .subtitle{color:var(--muted);margin-top:6px;font-size:14px}
    .badge-soft{border:1px solid var(--border);background:var(--glass);padding:8px 12px;border-radius:999px;font-size:12.5px}
    .lang-switch{display:flex;gap:8px}
    .btn{border:1px solid var(--border);background:var(--glass);color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
    .btn.active{outline:2px solid var(--accent)}
    .grid{display:grid;grid-template-columns:1.05fr .95fr;gap:22px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}
    .card{backdrop-filter: blur(10px); background:var(--card); border:1px solid var(--border);
      border-radius:16px; padding:18px; box-shadow:var(--shadow); animation:pop .35s ease}
    @keyframes pop{from{transform:translateY(6px); opacity:.0} to{transform:translateY(0); opacity:1}}
    .card h2{margin:2px 0 12px;font-size:18px}
    .hint{font-size:12.5px;color:var(--muted);margin-top:-6px;margin-bottom:14px}
    .form-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:14px}
    @media (max-width:640px){.form-grid{grid-template-columns:1fr}}
    label{font-weight:700;font-size:13.5px;margin-bottom:6px;display:block}
    input,select{width:100%;border-radius:12px;padding:12px;background:var(--input);border:1px solid var(--border);color:var(--text);outline:none;transition:.2s}
    input::placeholder{color:#94a3b8}
    input:focus,select:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(34,211,238,.18)}
    .note{font-size:11.5px;color:var(--muted);margin-top:6px}
    .divider{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.15),transparent);margin:12px 0}
    .submit{display:flex;gap:12px;align-items:center;margin-top:14px;flex-wrap:wrap}
    button[type="submit"]{background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:#021827;padding:12px 16px;border-radius:12px;font-weight:800;cursor:pointer;transition:transform .08s}
    button[type="submit"]:active{transform:scale(.98)}
    .kbd{border:1px solid var(--border);background:var(--chip);padding:4px 8px;border-radius:6px;font-size:12px;color:#cbd5e1}
    .pred{display:grid;gap:12px}
    .pill{display:inline-flex;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;font-weight:800;font-size:14px;border:1px solid var(--border)}
    .ok{background:rgba(16,185,129,.14);color:#bbf7d0}
    .bad{background:rgba(239,68,68,.14);color:#fecaca}
    .tbl{width:100%;border-collapse:collapse;margin-top:8px}
    .tbl th,.tbl td{padding:10px;border-bottom:1px dashed var(--border);text-align:left;font-size:13.5px}
    .tbl th{color:#cbd5e1;font-weight:800}
    .empty{border:1px dashed var(--border);border-radius:12px;padding:14px;color:#9aa5b1;text-align:center}
    footer{margin:24px 0 8px;color:var(--muted);font-size:12.5px;text-align:center}
    .tip{background:rgba(245,158,11,.13);border:1px solid rgba(245,158,11,.35);padding:10px 12px;border-radius:12px;margin-top:12px;font-size:12.5px}
    [data-i18n][data-lang="ar"] .en{display:none}
    [data-i18n][data-lang="en"] .ar{display:none}
    .msg{margin-top:4px;padding:10px 12px;border-radius:12px;border:1px solid var(--border);
      background:var(--glass);font-size:13.5px}
    .msg.ok{background:rgba(16,185,129,.14);color:#bbf7d0}
    .msg.bad{background:rgba(239,68,68,.14);color:#fecaca}
  </style>
</head>
<body>
  <div class="wrap" id="app" data-i18n data-lang="en">
    <div class="header">
      <div class="brand">
        <div class="logo">AI</div>
        <div>
          <h1><span class="en">Diabetes Prediction</span><span class="ar">ØªÙˆÙ‚Ø¹/ØªØ´Ø®ÙŠØµ Ø§Ù„Ø³ÙƒØ±ÙŠ</span></h1>
          <div class="subtitle">
            <span class="en">Enter patient features</span>
            <span class="ar">Ø£Ø¯Ø®Ù„ Ø®ØµØ§Ø¦Øµ Ø§Ù„Ù…Ø±ÙŠØ¶</span>
          </div>
        </div>
      </div>
      <div style="display:flex;gap:10px;align-items:center">
        <div class="badge-soft">FastAPI + ML Pipelines</div>
        <div class="lang-switch" role="group" aria-label="Language">
          <button type="button" class="btn active" id="btn-en" aria-pressed="true">EN</button>
          <button type="button" class="btn" id="btn-ar" aria-pressed="false">Ø¹</button>
        </div>
      </div>
    </div>

    <div class="grid">
      <!-- Form Card -->
      <div class="card" aria-labelledby="form-title">
        <h2 id="form-title"><span class="en">Input</span><span class="ar">Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„</span></h2>
        <div class="hint">
          <span class="en">Numeric codes or values are explained under each field</span>
          <span class="ar">Ø´Ø±Ø­ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ØªØ­Øª ÙƒÙ„ Ø­Ù‚Ù„</span>
        </div>

        <form method="post" action="/predict" id="pred-form" novalidate autocomplete="off">
          <div class="form-grid">

            <!-- Gender -->
            <div>
              <label for="gender"><span class="en">Gender</span><span class="ar">Ø§Ù„Ø¬Ù†Ø³</span></label>
              <select id="gender" name="gender" required></select>
              <div class="note"><span class="en">Use numeric code</span><span class="ar">Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø±Ù‚Ù…ÙŠ</span></div>
            </div>

            <!-- Age -->
            <div>
              <label for="age"><span class="en">Age</span><span class="ar">Ø§Ù„Ø¹Ù…Ø±</span></label>
              <input id="age" name="age" type="number" min="0" max="120" step="1" inputmode="numeric" placeholder="e.g., 45" required>
              <div class="note"><span class="en">Whole number only (0â€“120)</span><span class="ar">Ø¹Ø¯Ø¯ ØµØ­ÙŠØ­ ÙÙ‚Ø· (0â€“120)</span></div>
            </div>

            <!-- Hypertension -->
            <div>
              <label for="hypertension"><span class="en">Hypertension</span><span class="ar">Ø§Ø±ØªÙØ§Ø¹ Ø¶ØºØ· Ø§Ù„Ø¯Ù…</span></label>
              <select id="hypertension" name="hypertension" required></select>
              <div class="note">0 = <span class="en">No</span><span class="ar">Ù„Ø§</span> â€¢ 1 = <span class="en">Yes</span><span class="ar">Ù†Ø¹Ù…</span></div>
            </div>

            <!-- Heart disease -->
            <div>
              <label for="heart_disease"><span class="en">Heart Disease</span><span class="ar">Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ù‚Ù„Ø¨</span></label>
              <select id="heart_disease" name="heart_disease" required></select>
              <div class="note">0 = <span class="en">No</span><span class="ar">Ù„Ø§</span> â€¢ 1 = <span class="en">Yes</span><span class="ar">Ù†Ø¹Ù…</span></div>
            </div>

            <!-- Smoking history -->
            <div>
              <label for="smoking_history"><span class="en">Smoking History</span><span class="ar">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¯Ø®ÙŠÙ†</span></label>
              <select id="smoking_history" name="smoking_history" required></select>
              <div class="note">
                <span class="en">Ensure codes match training</span>
                <span class="ar">ØªØ£ÙƒØ¯ Ù…Ù† ØªØ·Ø§Ø¨Ù‚ Ø§Ù„ØªØ±Ù…ÙŠØ² Ù…Ø¹ Ø§Ù„ØªØ¯Ø±ÙŠØ¨</span>
              </div>
            </div>

            <!-- BMI -->
            <div>
              <label for="bmi"><span class="en">BMI</span><span class="ar">Ù…Ø¤Ø´Ø± ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù…</span></label>
              <input id="bmi" name="bmi" type="number" min="10" max="60" step="0.1" inputmode="decimal" placeholder="e.g., 27.4" required>
              <div class="note"><span class="en">Decimals allowed</span><span class="ar">Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø´Ø±ÙŠØ© Ù…Ø³Ù…ÙˆØ­Ø©</span></div>
            </div>

            <!-- HbA1c -->
            <div>
              <label for="HbA1c_level"><span class="en">HbA1c Level (%)</span><span class="ar">Ù…Ø³ØªÙˆÙ‰ HbA1c</span></label>
              <input id="HbA1c_level" name="HbA1c_level" type="number" min="3" max="20" step="0.1" inputmode="decimal" placeholder="e.g., 6.5" required>
              <div class="note"><span class="en">Decimals allowed</span><span class="ar">Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø´Ø±ÙŠØ© Ù…Ø³Ù…ÙˆØ­Ø©</span></div>
            </div>

            <!-- Glucose -->
            <div>
              <label for="blood_glucose_level"><span class="en">Blood Glucose (mg/dL)</span><span class="ar">Ø¬Ù„ÙˆÙƒÙˆØ² Ø§Ù„Ø¯Ù…</span></label>
              <input id="blood_glucose_level" name="blood_glucose_level" type="number" min="40" max="500" step="0.1" inputmode="decimal" placeholder="e.g., 130" required>
              <div class="note"><span class="en">Decimals allowed</span><span class="ar">Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø´Ø±ÙŠØ© Ù…Ø³Ù…ÙˆØ­Ø©</span></div>
            </div>

          </div>

          <div class="divider"></div>

          <div class="submit">
            <button type="submit" title="Run prediction â€¢ ØªÙ†ÙÙŠØ° Ø§Ù„ØªÙ†Ø¨Ø¤"><span class="en">Predict</span><span class="ar">ØªÙˆÙ‚Ù‘Ø¹</span></button>
            <span class="kbd">*</span>
            <span class="en">required</span><span class="ar">Ø­Ù‚Ù„ Ø¥Ù„Ø²Ø§Ù…ÙŠ</span>
          </div>

          <div class="tip">
            <strong><span class="en">Tip:</span><span class="ar">Ù…Ù„Ø§Ø­Ø¸Ø©:</span></strong>
            <span class="en">If you used a different smoking mapping during training, update the dropdown to match.</span>
            <span class="ar">Ø¥Ø°Ø§ ÙƒØ§Ù† ØªØ±Ù…ÙŠØ² Ø§Ù„ØªØ¯Ø®ÙŠÙ† Ù…Ø®ØªÙ„ÙÙ‹Ø§ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ØŒ Ø­Ø¯Ù‘Ø« Ø§Ù„Ù‚ÙŠÙ… ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„ØªØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ù‡.</span>
          </div>
        </form>
      </div>

      <!-- Results Card -->
      <div class="card" aria-labelledby="results-title">
        <h2 id="results-title"><span class="en">Results</span><span class="ar">Ø§Ù„Ù†ØªØ§Ø¦Ø¬</span></h2>
        {% if predictions %}
          <div class="pred">
            <div class="pill {% if majority == 'Diabetes' %}bad{% else %}ok{% endif %}">
              <span class="en">Final Decision:</span><span class="ar">Ø§Ù„Ù‚Ø±Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</span> <strong>{{ majority }}</strong>
            </div>

            {% if majority == 'Diabetes' %}
              <div class="msg bad">
                <span class="en">Your sugar is a bit high, donâ€™t worry ğŸŒ¿. Pay attention to your next meals and stay active.</span>
                <span class="ar">Ø§Ù„Ø³ÙƒØ± Ø¹Ø§Ù„ÙŠ Ø´ÙˆÙŠØŒ Ù„Ø§ ØªÙ‚Ù„Ù‚ ğŸŒ¿ØŒ Ø§Ù†ØªØ¨Ù‡ Ù„Ù„Ø£ÙƒÙ„ Ø§Ù„Ø¬Ø§ÙŠ ÙˆØ®Ù„ÙŠÙƒ Ù†Ø´ÙŠØ·.</span>
              </div>
            {% else %}
              <div class="msg ok">
                <span class="en">Youâ€™re balanced â€” keep up your healthy habits ğŸŒ¸</span>
                <span class="ar">ÙˆØ¶Ø¹Ùƒ Ù…ØªÙˆØ§Ø²Ù†ØŒ Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¹Ø§Ø¯Ø§ØªÙƒ Ø§Ù„ØµØ­ÙŠØ© ğŸŒ¸</span>
              </div>
            {% endif %}

            <table class="tbl" aria-label="Model predictions table">
              <thead>
                <tr>
                  <th><span class="en">Model</span><span class="ar">Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</span></th>
                  <th><span class="en">Prediction</span><span class="ar">Ø§Ù„ØªÙ†Ø¨Ø¤</span></th>
                </tr>
              </thead>
              <tbody>
                {% for model, result in predictions.items() %}
                  <tr><td>{{ model }}</td><td>{{ result }}</td></tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        {% else %}
          <div class="empty"><span class="en">Submit the form to see predictions</span><span class="ar">Ø£Ø±Ø³Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</span></div>
        {% endif %}
      </div>
    </div>

    <footer>
      <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap">
        <span>FastAPI â€¢ Scikit-Learn â€¢ Joblib</span>
        <span><span class="en">Education use only</span><span class="ar">Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</span></span>
      </div>
    </footer>
  </div>

  <script>
    const app = document.getElementById('app');
    const btnEn = document.getElementById('btn-en');
    const btnAr = document.getElementById('btn-ar');

    // Ù†ØµÙˆØµ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª ÙˆØ§Ù„Ù€ placeholders Ù„ÙƒÙ„ Ù„ØºØ©
    const DICTS = {
      en: {
        options: {
          gender: [
            {v:0, t:'0 â€” Female'},
            {v:1, t:'1 â€” Male'},
            {v:2, t:'2 â€” Other'}
          ],
          hypertension: [
            {v:0, t:'0 â€” No'},
            {v:1, t:'1 â€” Yes'}
          ],
          heart_disease: [
            {v:0, t:'0 â€” No'},
            {v:1, t:'1 â€” Yes'}
          ],
          smoking_history: [
            {v:0, t:'0 â€” Never'},
            {v:1, t:'1 â€” Current'},
            {v:2, t:'2 â€” Former'},
            {v:3, t:'3 â€” No Info'},
            {v:4, t:'4 â€” Ever'},
            {v:5, t:'5 â€” Not current'}
          ]
        },
        placeholders: {
          age: 'e.g., 45',
          bmi: 'e.g., 27.4',
          HbA1c_level: 'e.g., 6.5',
          blood_glucose_level: 'e.g., 130'
        }
      },
      ar: {
        options: {
          gender: [
            {v:0, t:'0 â€” Ø£Ù†Ø«Ù‰'},
            {v:1, t:'1 â€” Ø°ÙƒØ±'},
            {v:2, t:'2 â€” Ø¢Ø®Ø±'}
          ],
          hypertension: [
            {v:0, t:'0 â€” Ù„Ø§'},
            {v:1, t:'1 â€” Ù†Ø¹Ù…'}
          ],
          heart_disease: [
            {v:0, t:'0 â€” Ù„Ø§'},
            {v:1, t:'1 â€” Ù†Ø¹Ù…'}
          ],
          smoking_history: [
            {v:0, t:'0 â€” Ù„Ù… ÙŠØ¯Ø®Ù† Ø£Ø¨Ø¯Ø§Ù‹'},
            {v:1, t:'1 â€” Ù…Ø¯Ø®Ù† Ø­Ø§Ù„ÙŠØ§Ù‹'},
            {v:2, t:'2 â€” Ø£Ù‚Ù„Ø¹ Ø¹Ù† Ø§Ù„ØªØ¯Ø®ÙŠÙ†'},
            {v:3, t:'3 â€” Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª'},
            {v:4, t:'4 â€” Ø¯Ø®Ù‘Ù† ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª'},
            {v:5, t:'5 â€” Ù„ÙŠØ³ Ù…Ø¯Ø®Ù†Ø§Ù‹ Ø§Ù„Ø¢Ù†'}
          ]
        },
        placeholders: {
          age: 'Ù…Ø«Ø§Ù„: 45',
          bmi: 'Ù…Ø«Ø§Ù„: 27.4',
          HbA1c_level: 'Ù…Ø«Ø§Ù„: 6.5',
          blood_glucose_level: 'Ù…Ø«Ø§Ù„: 130'
        }
      }
    };

    // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø­Ù‚ÙˆÙ„
    const selects = {
      gender: document.getElementById('gender'),
      hypertension: document.getElementById('hypertension'),
      heart_disease: document.getElementById('heart_disease'),
      smoking_history: document.getElementById('smoking_history')
    };
    const inputs = {
      age: document.getElementById('age'),
      bmi: document.getElementById('bmi'),
      HbA1c_level: document.getElementById('HbA1c_level'),
      blood_glucose_level: document.getElementById('blood_glucose_level')
    };

    function fillSelect(el, items){
      const saved = el.value;
      el.innerHTML = '';
      for(const item of items){
        const o = document.createElement('option');
        o.value = String(item.v);
        o.textContent = item.t;
        el.appendChild(o);
      }
      if(saved) el.value = saved;
    }
    function setPlaceholders(lang){
      const p = DICTS[lang].placeholders;
      if(inputs.age) inputs.age.placeholder = p.age;
      if(inputs.bmi) inputs.bmi.placeholder = p.bmi;
      if(inputs.HbA1c_level) inputs.HbA1c_level.placeholder = p.HbA1c_level;
      if(inputs.blood_glucose_level) inputs.blood_glucose_level.placeholder = p.blood_glucose_level;
    }

    function setLang(lang){
      app.setAttribute('data-lang', lang);
      document.documentElement.lang = (lang === 'ar') ? 'ar' : 'en';
      document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';
      btnEn.classList.toggle('active', lang === 'en');
      btnAr.classList.toggle('active', lang === 'ar');
      btnEn.setAttribute('aria-pressed', String(lang === 'en'));
      btnAr.setAttribute('aria-pressed', String(lang === 'ar'));

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… ÙˆØ§Ù„Ù€ placeholders
      const dict = DICTS[lang].options;
      fillSelect(selects.gender, dict.gender);
      fillSelect(selects.hypertension, dict.hypertension);
      fillSelect(selects.heart_disease, dict.heart_disease);
      fillSelect(selects.smoking_history, dict.smoking_history);
      setPlaceholders(lang);

      try { localStorage.setItem('lang', lang); } catch(e){}
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
    try {
      const saved = localStorage.getItem('lang');
      if(saved) setLang(saved);
      else setLang('en'); // Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
    } catch(e){ setLang('en'); }

    btnEn.addEventListener('click', () => setLang('en'));
    btnAr.addEventListener('click', () => setLang('ar'));
  </script>
</body>
</html>